var W = window;

W.ajaxOutputForError.html('');

<% if @answer.errors.present? %>
  W.ajaxOutputForError.html('<%= j render 'error_explanation' %>');
<% else %>
  <% publish_to "/questions/#{@question.id}/answers" do %>
    window.ajaxOutputForAnswer.html('<%= j render 'answers' %>');
  <% end %>
  W.showForAnswer.show();
  W.formForAnswer.hide();
  W.bodyForAnswer.val('');
<% end %>

W.setRandomColor();
W.resizeAllGridItems();
$('img').on('load', function() {
  W.resizeAllGridItems();
});